<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Javier Álvarez Liébana y Enric Palau Payeras (UCM) • SEIO 2023 (Elche)">
  <title>Predicción del voto electoral en España</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/data-science-2.jpeg" data-background-opacity="0.2" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">Predicción del voto electoral en España</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Javier Álvarez Liébana y Enric Palau Payeras (UCM) • SEIO 2023 (Elche) 
</div>
</div>
</div>

</section>
<section>
<section id="contexto-objetivos-y-antecedentes" class="title-slide slide level1 center">
<h1>Contexto, objetivos y antecedentes</h1>
<p><span style="color:#444442;"><strong>Incertidumbre electoral</strong></span></p>
</section>
<section id="contexto" class="slide level2">
<h2>Contexto</h2>
<ul>
<li>El clima político español lleva experimentando grandes cambios sistemáticos desde 2008, pasando de un <span class="hl-yellow"><strong>sistema prácticamente bipartidista</strong></span> a un sistema donde prima la <span class="hl-yellow"><strong>estrategia de pactos</strong></span> multipartidista.</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<ul>
<li>En épocas de crisis, como la pandemia de COVID-19 o las repeticiones electorales de 2019, la <span class="hl-yellow"><strong>expectación por los resultados electorales</strong></span> es máxima.</li>
</ul>
</div><div class="column" style="width:35%;">
<p><img data-src="img/quien-ganara.jpg"></p>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Sin embargo, a pesar de contar con cada vez <span class="hl-yellow"><strong>más casas demoscópicas</strong></span> y agregadores («food chain feeding demand»), se ha extendido la idea de que las <span class="hl-yellow"><strong>encuestas electorales no funcionan</strong></span> y que no sirven para predecir el voto.</li>
</ul>
</div>
</section>
<section id="objetivos" class="slide level2">
<h2>Objetivos</h2>
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Objetivo 1: estudiar errores sistemáticos</strong></p>
</div>
<div class="callout-content">
<p>Automatizar un <span class="hl-yellow"><strong>proceso de extracción, transformación y carga del histórico de datos electorales</strong></span> así como de las proyección demoscópicas de las casas encuestadoras en España a nivel nacional.</p>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Objetivo 2: analizar sesgos sistemáticos (house effects)</strong></p>
</div>
<div class="callout-content">
<p>Analizar la <span class="hl-yellow"><strong>desviación sistemática de las casas encuestadoras</strong></span>, <sup>1</sup> desagregado por casa encuestadora, partido, bloque ideológico y cita electoral, entre otras variables.</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Objetivo 3: predecir con Machine Learning</strong></p>
</div>
<div class="callout-content">
<p>Se aplicarán distintos <span class="hl-yellow"><strong>algoritmos predictivos de Machine Learning</strong></span> para mejorar tanto las predicciones de las casas encuestadoras como los promedios de agregadores electorales (Kiko Llaneras, TheElectoralReport <sup>2</sup>, etc)</p>
</div>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Masters, A.B.(2020). Estimating House Effects. <a href="https://medium.com/swlh/estimating-houseeffects-5c465f2aca87" class="uri">https://medium.com/swlh/estimating-houseeffects-5c465f2aca87</a></p></li><li id="fn2"><p><a href="https://app.precisaresearch.com/" class="uri">https://app.precisaresearch.com/</a></p></li></ol></aside></section>
<section id="antecedentes" class="slide level2">
<h2>Antecedentes</h2>
<ul>
<li>Pocos son los/as autores/as que han aplicado <span class="hl-yellow"><strong>técnicas de Machine Learning</strong></span> <sup>1</sup> para la predicción de resultados electorales (al menos cuya metodología sea pública y transparente).</li>
</ul>
<div class="fragment">
<ul>
<li>En la mayoría de casos dichas predicciones son hechas por medios de comunicación, institutos demoscópicos, partidos electorales o <span class="hl-yellow"><strong>agregadores</strong></span> (TheElectoralReport o FiveThirtyEight <sup>2</sup> <sup>3</sup>).</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn3"><p>Hare, C., and Kutsuris, M. (2022). Measuring Swing Voters with a Supervised Machine Learning Ensemble. Political Analysis 31.</p></li><li id="fn4"><p>Silver, N. (2012). Calculating ‘House Effects’ of Polling Firms. <a href="https://fivethirtyeight.com/features/calculatinghouse-effects-of-polling-firms" class="uri">https://fivethirtyeight.com/features/calculatinghouse-effects-of-polling-firms</a></p></li><li id="fn5"><p>Silver, N. (2020). How FiveThirtyEight’s 2020 Presidential Forecast Works — And What’s Different Because Of COVID-19. <a href="https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/" class="uri">https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/</a></p></li></ol></aside></section>
<section id="antecedentes-1" class="slide level2">
<h2>Antecedentes</h2>
<ul>
<li>Recientemente ha llegado a España los conocidos como <span class="hl-yellow"><strong>mercados de predicción</strong></span> <sup>1</sup>: una especie de mercado de apuestas en los que se predice la intención de voto en función del consenso de los apostantes.</li>
</ul>
<div class="fragment">
<ul>
<li>Algunos autores proponen algunas <span class="hl-yellow"><strong>alternativas a las encuestas</strong></span> para proporcionar a los partidos una estimación de su intención de voto basado en el <span class="hl-yellow"><strong>análisis de reputación</strong></span> de sus candidatos <sup>2</sup>, como predictores correlados de dicha intención de voto.</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn6"><p>Ortega, A.L. (2022). ¿Cómo funciona el mercado de predicción? <a href="https://aloport.github.io/predi/projects.html" class="uri">https://aloport.github.io/predi/projects.html</a></p></li><li id="fn7"><p>Gutiérrez-Rodríguez, P., Villareal, R., Cuesta-Valiño, P., Blozis, S. A. (2023). Valuation of candidate brand equity dimensions and voting intention: alternative polling data in the Spanish presidential election. Humanities and Social Sciences Communications 10,</p></li></ol></aside></section>
<section id="antecedentes-2" class="slide level2">
<h2>Antecedentes</h2>
<ul>
<li>También se han usado recientemente el método <span class="hl-yellow"><strong>Network scale-up (Network scale-up method, NSUM)</strong></span> <sup>1</sup> <sup>2</sup> para la estimación de intención de voto, haciendo uso de <span class="hl-yellow"><strong>preguntas indirectas</strong></span> para la estimación del tamaño de una subpoblación de votantes <sup>3</sup></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn8"><p>Maltiel, R., Raftery, A.E., McCormick, T.H., Baraff, A.J. (2015). Estimating Population Size Using the Network Scale Up Method. Ann Appl Stat 9</p></li><li id="fn9"><p>Kunke, J.P., Laga, I., Niu, X., McCormick, T.H. (2023). Comparing the Robustness of Simple Network Scale-Up Method (NSUM) Estimators. Center for statistics and the social science.</p></li><li id="fn10"><p>Martín-Arevalillo, J., Ramírez, J.M., Díaz-Aranda, S., Aguilar, J., Fernández-Anta, A., Lillo, R.E. (2023). Study and estimation of voting intention by network scale up methods. SEIO 2023.</p></li></ol></aside></section></section>
<section>
<section id="software-empleado-y-fuentes-de-datos" class="title-slide slide level1 center">
<h1>Software empleado y fuentes de datos</h1>

</section>
<section id="software-empleado" class="slide level2">
<h2>Software empleado</h2>
<ul>
<li><p>Para la recolección y depuración de los datos hemos usado tanto <span class="hl-yellow"><strong>R</strong></span> como <span class="hl-yellow"><strong>SQL</strong></span>.</p></li>
<li><p>Para el análisis exploratorio, visualización y modelización hemos usado R</p></li>
<li><p>Todo el código se encuentra libremente disponible en <span class="hl-yellow"><strong>Github</strong></span> en <a href="https://github.com/3nriket/TFM_encuestas_y_elecciones_EPP_UCM_2023" class="uri">https://github.com/3nriket/TFM_encuestas_y_elecciones_EPP_UCM_2023</a></p></li>
</ul>
<p><img data-src="img/Rlogo.png" width="400"> <img data-src="img/Sql_data_base_with_logo.png" width="400"></p>
</section>
<section id="fuentes-de-datos" class="slide level2">
<h2>Fuentes de datos</h2>
<p>Se han usado fundamentalmente <span class="hl-yellow"><strong>3 tipos de bases de datos</strong></span></p>
<ul>
<li><span class="hl-yellow"><strong>Proyecciones demoscópicas</strong></span>. Se automatizará la recopilación de <span class="hl-purple"><strong>datos agregados</strong></span> de encuestas a nivel nacional.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Resultados electorales</strong></span>. Se extraerán <span class="hl-purple"><strong>datos electorales</strong></span> (censo, porcentaje de voto, etc) provenientes del Ministerio del Interior.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Variables externas socioeconómicas</strong></span>. Se extraerán <span class="hl-purple"><strong>variables socioeconómicas</strong></span> provenientes del INE, CIS, etc</li>
</ul>
</div>
<div class="fragment">
<blockquote>
<p>La idea principal del trabajo es que una encuesta, en un instante temporal, falla, pero la evolución del conjunto de las mismas nos puede servir para realizar predicciones certeras.</p>
</blockquote>
</div>
</section></section>
<section>
<section id="metodología-extracción-y-depuración" class="title-slide slide level1 center">
<h1>Metodología: extracción y depuración</h1>

</section>
<section id="variable-objetivo" class="slide level2">
<h2>Variable objetivo</h2>
<p><span class="hl-yellow"><strong>¿Cuál es la variable objetivo?</strong></span></p>
<div class="fragment">
<ul>
<li>Denotaremos como <span class="math inline">\(\hat{V}_{ij}(t)\)</span> la <span class="hl-yellow"><strong>predicción de porcentaje de voto</strong></span> de una casa encuestadora <span class="math inline">\(s_i\)</span>, para un partido <span class="math inline">\(p_j\)</span>, en un instante temporal <span class="math inline">\(t\)</span> previo a las elecciones.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Denotaremos como <span class="math inline">\(V_{j}\)</span> el <span class="hl-yellow"><strong>porcentaje de voto real</strong></span> obtenido el día de las elecciones.</li>
</ul>
</div>
<div class="fragment">
<p>Por cada casa encuestadora <span class="math inline">\(s_i\)</span> y partido <span class="math inline">\(p_j\)</span>, en un instante temporal <span class="math inline">\(t\)</span>, anterior a las elecciones, tenemos entonces que</p>
<p><span class="math display">\[V_{j} = \hat{V}_{ij}(t) + \varepsilon_{ij}(t), \quad i=1,\ldots,E, \quad j=1,\ldots, P\]</span></p>
</div>
</section>
<section id="variable-objetivo-1" class="slide level2">
<h2>Variable objetivo</h2>
<p><span class="math display">\[V_{j} = \hat{V}_{ij}(t) + \varepsilon_{ij}(t), \quad i=1,\ldots,E, \quad j=1,\ldots, P\]</span></p>
<p>En contraste con uno de los paradigmas principales del Machine Learning, en nuestro problema de <span class="hl-yellow"><strong>medidas repetidas</strong></span>, con un mismo valor de la variable objetivo <span class="math inline">\(V_j\)</span> para una muestra de predictoras <span class="math inline">\(V_{j} = \hat{V}_{ij}(t)\)</span></p>
<div class="fragment">
<p>&nbsp;</p>
<p>El <span class="hl-yellow"><strong>objetivo de este trabajo</strong></span> es ser capaces de, en un instante de tiempo <span class="math inline">\(t\)</span> estimar los errores cometidos por cada encuestadora <span class="math inline">\(\hat{\varepsilon}_{ij}(t)\)</span>, para cada partido, de manera que la <span class="hl-yellow"><strong>estimación agregada final</strong></span> sea el resultado del promedio de sus predicciones, tras corregirlas por los errores estimados cometidos</p>
<p><span class="math display">\[\hat{V}_{j} = \frac{1}{E} \sum_{i=1}^{E} \left( \hat{V}_{ij}(t) + \hat{\varepsilon}_{ij}(t) \right), \quad j=1,\ldots, P\]</span></p>
</div>
</section>
<section id="depuración-encuestas" class="slide level2">
<h2>Depuración: encuestas</h2>
<p>Los <span class="hl-yellow"><strong>datos agregados de las encuestadoras</strong></span> proceden de bases de datos abiertas como la Wikipedia</p>

<img data-src="img/encuestas-wiki.jpg" class="r-stretch"><p>El objetivo será predecir el porcentaje de voto real (primera fila de la tabla), por los principales partidos políticos (rectángulo discontinuo azul), en las distintas carreras electorales desde 1982 hasta la actualidad, haciendo uso de la estimación de voto de cada casa (matriz de valores del recuadro verde).</p>
</section>
<section id="depuración-encuestas-1" class="slide level2">
<h2>Depuración: encuestas</h2>
<p>La <span class="hl-yellow"><strong>automatización en la extracción</strong></span> contó con los siguientes pasos:</p>
<ul>
<li><p>Generación de una <span class="hl-yellow"><strong>base de datos de links</strong></span> en los que realizar la búsqueda de resultados mediante el uso con expresiones regulares para las distintas elecciones desde 1982.</p></li>
<li><p>Acceso al código html para extraer de los <span class="hl-yellow"><strong>png de los logos los nombres</strong></span> de los partidos políticos</p></li>
</ul>

<img data-src="img/wiki-links.jpg" width="700" class="r-stretch"></section>
<section id="depuración-encuestas-2" class="slide level2">
<h2>Depuración: encuestas</h2>
<p>Una vez construida la base de (meta)datos, se <span class="hl-yellow"><strong>accedió al código html</strong></span> de cada una de ellas para extraer los datos de cada una de las tablas. Estos son algunos de los pasos adoptados en la depuración</p>
<div class="fragment">
<ul>
<li><span class="hl-green"><strong>Recodificar</strong></span> el nombre de los partidos y casas encuestadoras.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Cálcular el número de <span class="hl-green"><strong>días de trabajo de campo</strong></span> de cada encuesta y los <span class="hl-green"><strong>días que quedan</strong></span> para la celebración de las elecciones.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Descartar encuestas sin tamaño muestral</strong></span> o con <span class="hl-red"><strong>menos de 1 día de trabajo de campo</strong></span>, así como encuestas realizadas por partidos.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Dado que el primer objetivo será <span class="hl-yellow"><strong>rankear el binomio casa encuestadora - partido</strong></span>, se procedió a <span class="hl-red"><strong>descartar casas poco frecuentes</strong></span> (&lt;1%) cuya precisión no podemos calibrar.</li>
</ul>
</div>
</section>
<section id="depuración-encuestas-3" class="slide level2">
<h2>Depuración: encuestas</h2>
<p>La <span class="hl-yellow"><strong>tabla (tidy data) resultante se aproxima a las 12 000 observaciones</strong></span> (porcentaje de voto que una encuestadora estima, para cada partido, fecha de campo y carrera electoral), identificando de manera unívoca cada encuesta (casa encuestadora + fechas de campo)</p>

<img data-src="img/encuestas-preproc.jpg" class="r-stretch"></section>
<section id="depuración-elecciones" class="slide level2">
<h2>Depuración: elecciones</h2>
<p>Los <span class="hl-yellow"><strong>datos relativos a resultados electorales</strong></span> se han obtenido a través del portal Infoelectoral del Ministerio del Interior, a través del proyecto de paquete de R <code>{pollspain}</code>, que tenemos actualmente en desarrollo.</p>
<p>&nbsp;</p>
<p>En esta fuente, los datos se encuentran desagregados por <span class="hl-yellow"><strong>distritos electorales</strong></span>, que para esta tentativa preliminar hemos decidido <span class="hl-yellow"><strong>agregarlos a nivel nacional</strong></span>, para cada partido y carrera electorales, tanto el porcentaje de voto como variables que cuantifique el censo, la participación, votos blancos y votos nulos.</p>
<p>&nbsp;</p>
<p>Se ha tenido que realizar un arduo trabajo de normalización de los partidos</p>
</section>
<section id="depuración-elecciones-1" class="slide level2">
<h2>Depuración: elecciones</h2>
<p>Con los datos de casas encuestadores y los resultados reales, podremos construir tanto el <span class="hl-yellow"><strong>promedio/consenso de mercado</strong></span> (encuestas ponderadas por su tamaño muestral y ventana temporal) como el análisis de las <span class="hl-yellow"><strong>desviaciones respecto a la realidad</strong></span></p>

<img data-src="img/electoral-results.jpg" class="r-stretch"></section>
<section id="depuración-exógenas" class="slide level2">
<h2>Depuración: exógenas</h2>
<p><span class="hl-yellow"><strong>¿Por qué incluir variables exógenas?</strong></span></p>
<div class="fragment">
<p>Aunque considerar en modelos de predicción electoral solo variables exógenas puede incorporar excesivo ruido y tener un bajo poder predictivo, no incorporarlas puede ocasionar un <span class="hl-yellow"><strong>incremento del sesgo y variabilidad del error al modelo, especialmente si las encuestadoras han fallado</strong></span> o no han sido correctamente seleccionadas</p>
<p>&nbsp;</p>
<p>Nate Silver <sup>1</sup> cuantificó en un 30% la variabilidad explicada por las condiciones económicas en las elecciones americanas de 2020.</p>
</div>
<aside><ol class="aside-footnotes"><li id="fn11"><p>Silver, N. (2020). How FiveThirtyEight’s 2020 Presidential Forecast Works — And What’s Different Because Of COVID-19. Fivethirtyeight. <a href="https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/" class="uri">https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/</a></p></li></ol></aside></section>
<section id="depuración-exógenas-1" class="slide level2">
<h2>Depuración: exógenas</h2>
<p>Por ello hemos <span class="hl-yellow"><strong>recopilado variables exógenas desde 1980</strong></span>, agrupadas en los siguientes bloques temáticos:</p>
<ul>
<li><span class="hl-purple"><strong>Medio ambiente</strong></span>: generación y consumo eléctrico, emisiones de CO2, reservas de petróleo, etc. Según las encuestas de IPSOS «en España, del 74% al 88% de los potenciales electores estaría considerando votar a un partido que reduzca la factura energética e impulse la transición energética» <sup>1</sup></li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Demografía y sociedad</strong></span>: esperanza de vida, casos de violencia machista, etc. De acuerdo con el informe de IPSOS <sup>2</sup>, la justicia social es una preocupación emergente entre los votantes en España.</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn12"><p>Encuesta IPSOS para Grupo Crecimiento Verde (2019). El medio ambiente pesa en la decisión de voto <a href="https://grupocrecimientoverde.org/elmedio-ambiente-pesa-en-la-decision-de-voto/" class="uri">https://grupocrecimientoverde.org/elmedio-ambiente-pesa-en-la-decision-de-voto/</a></p></li><li id="fn13"><p>Encuesta IPSOS para Grupo Crecimiento Verde (2019). El medio ambiente pesa en la decisión de voto <a href="https://grupocrecimientoverde.org/elmedio-ambiente-pesa-en-la-decision-de-voto/" class="uri">https://grupocrecimientoverde.org/elmedio-ambiente-pesa-en-la-decision-de-voto/</a></p></li></ol></aside></section>
<section id="depuración-exógenas-2" class="slide level2">
<h2>Depuración: exógenas</h2>
<p>Por ello hemos <span class="hl-yellow"><strong>recopilado variables exógenas desde 1980</strong></span>, agrupadas en los siguientes bloques temáticos:</p>
<ul>
<li><span class="hl-purple"><strong>Economía</strong></span>: inflación, IPC, etc. Dicha inclusión está basada en los postulados de Fearon (1998), Kuklinski y West (1981) y Lewis-Beck y Skalaban (1989), como se ilustra en Jaime-Castillo et al.&nbsp;(2014) <sup>1</sup>, que indicaban que el voto económico es un instrumento para seleccionar al que el individuo considera el mejor de los candidatos de la carrera (aunque no por una mayoría de ciudadanos).</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Política y Gobierno</strong></span>: gestión del gobierno, presupuestos generales del estado, etc.</li>
</ul>
</div>
<div class="fragment">
<p>En este trabajo hemos incorporado finalmente <strong>31 indicadores a nivel nacional</strong>.</p>
</div>
<aside><ol class="aside-footnotes"><li id="fn14"><p>Jaime-Castillo, A.M., Sáez-Lozano, J.L.(2014). Atribución de la responsabilidad y voto económico El caso de España. El trimestre económico 81. <a href="https://www.eltrimestreeconomico.com.mx/index.php/te/article/view/369/70" class="uri">https://www.eltrimestreeconomico.com.mx/index.php/te/article/view/369/70</a></p></li></ol></aside></section></section>
<section>
<section id="metodología-análisis-de-errores" class="title-slide slide level1 center">
<h1>Metodología: análisis de errores</h1>

</section>
<section id="house-effects" class="slide level2">
<h2>House effects</h2>
<p>La <span class="hl-yellow"><strong>hipótesis principal</strong></span> del trabajo no es (de momento) desarrollar el mejor método de predicción en el contexto de Machine Learning, sino ilustrar como, con métodos ya conocidos, se puede obtener un <span class="hl-yellow"><strong>buen resultado predictivo entendiendo los sesgos sistemáticos de las casas encuestadoras</strong></span>.</p>
<p>&nbsp;</p>
<div class="fragment">
<p>El <span class="hl-yellow"><strong>simple promedio ponderado</strong></span> de encuestas de los medios de comunicación y agregadores solo nos ofrece una <span class="hl-yellow"><strong>fotografía del estado de la precisión</strong></span> de las casas encuestadoras, pero no permite ofrecer precisión a partir de cierto umbral</p>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>El objetivo del trabajo es chequear como con técnicas de Machine Learning, el <span class="hl-yellow"><strong>consenso de los errores</strong></span> puede ayudarnos a una predicción precisa.</p>
</div>
</section>
<section id="house-effects-1" class="slide level2">
<h2>House effects</h2>
<p>Sea <span class="math inline">\(\hat{V}_{ij}(t)\)</span> la predicción de intención de voto de cada casa encuestadora <span class="math inline">\(s_i\)</span> y para cada partido <span class="math inline">\(p_j\)</span>, en un instante temporal <span class="math inline">\(t\)</span>, y sea <span class="math inline">\(\varepsilon_{ij}(t)\)</span> el error real que están cometiendo (cuando <span class="math inline">\(t\)</span> es la cita electoral) y <span class="math inline">\(V_{j}\)</span> el resultado real para cada partido, tal que</p>
<p><span class="math display">\[\varepsilon_{ij}(t) = V_{j} - \hat{V}_{ij}(t) , \quad i=1,\ldots,E, \quad j=1,\ldots, P\]</span></p>
<div class="fragment">
<p>Llamaremos <span class="hl-yellow"><strong>house effect</strong></span>, denotado como <span class="math inline">\(HE_{ij}\)</span> al <span class="hl-yellow"><strong>sesgo sistemático</strong></span> (a lo largo del tiempo <span class="math inline">\([t_0, t_1]\)</span>) de una casa encuestadora <span class="hl-yellow"><strong>respecto al promedio</strong></span> de un partido o bloque ideológico, definido como</p>
<p><span class="math display">\[HE_{ij}(t_0, t_1) = \frac{1}{\left| T \right|}\sum_{t \in T} \left| \hat{V}_{ij}(t) - \frac{1}{\left| T \right|}\sum_{t \in T} \omega_{i,j} \hat{V}_{ij}(t)\right|\]</span></p>
</div>
</section>
<section id="house-effects-y-promedios" class="slide level2">
<h2>House effects y promedios</h2>
<p>Para analizar dichas desviaciones se han definido diferentes <span class="hl-yellow"><strong>promedios</strong></span>, todos ellos <span class="hl-yellow"><strong>ponderados por tamaño de la encuesta y ventana temporal</strong></span> (encuestas con mayor muestra y más recientes tendrán más peso)</p>
<ul>
<li><span class="hl-purple"><strong>Promedio general partido</strong></span>: promedio ponderado de todas las estimaciones de voto, de todas las casas, para un determinado partido, en un rango temporal.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Promedio general ideológico</strong></span>: promedio ponderado de todas las estimaciones de voto, de todas las casas, para un determinado bloque ideológico, en un rango temporal.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Promedio casa partido</strong></span>: promedio ponderado de todas las estimaciones de voto, para un determinado partido y casa encuestadora.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Promedio casa ideológico</strong></span>: promedio ponderado de todas las estimaciones de voto, para un determinado bloque ideológico y casa encuestadora.</li>
</ul>
</div>
</section>
<section id="house-effects-y-promedios-1" class="slide level2">
<h2>House effects y promedios</h2>
<p>Así el <span class="hl-yellow"><strong>house effect</strong></span> puede ser definido como la <span class="hl-yellow"><strong>infraestimación o sobreestimación</strong></span> de una casa encuestadora respecto a un partido/bloque <span class="hl-yello2"><strong>respecto al promedio ponderado</strong></span> correspondiente, para un periodo de tiempo dado para cada cita electoral.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:35%;">
<p><span class="hl-green"><strong>Ejemplo</strong></span>: para las últimas elecciones de 2019 se refleja un sesgo sistemático favorable al PP y/o ala derecha de encuestadoras como Gesop. Por otro lado, el CIS tuvo un sesgo sistemático en favor de PSOE y al ala izquierda.</p>
</div><div class="column" style="width:65%;">
<p><img data-src="img/house-effect-casas.jpg"></p>
</div>
</div>
</div>
</section>
<section id="house-effects-y-promedios-2" class="slide level2">
<h2>House effects y promedios</h2>

<img data-src="img/house-effect-partido-casa.jpg" class="r-stretch quarto-figure-center"><p class="caption">Los puntos de colores son las estimaciones de cada encuesta; los puntos con contorno negro representan el promedio de la casa; la barra representa el promedio de mercado; y la línea horizontal equivale al voto observado.</p><p>Estos sesgos no solo no los consideramos perjudiciales para nuestros modelos sino que, si son continuados en el tiempo, la hipótesis es que servirán a nuestros modelos como un “recuerdo de estimación”.</p>
</section></section>
<section>
<section id="metodología-técnicas-machine-learning" class="title-slide slide level1 center">
<h1>Metodología: técnicas Machine Learning</h1>

</section>
<section id="train-validación-test" class="slide level2">
<h2>Train-validación-test</h2>
<p>En el trabajo se excluyeron las recientes elecciones de 2023. De las 11 036 restantes se decidió <span class="hl-yellow"><strong>particionar</strong></span> como sigue</p>
<ul>
<li><span class="hl-yellow"><strong>Entrenamiento (train)</strong></span>: 80% de los datos
<ul>
<li><strong>Validación</strong>: validación cruzada con <span class="math inline">\(k = 4\)</span> folds y 100 repeticiones.</li>
</ul></li>
<li><span class="hl-yellow"><strong>Test</strong></span>: 20% de los datos</li>
</ul>
<div class="fragment">
<p>La <span class="hl-yellow"><strong>métrica o bondad de ajuste</strong></span> a evaluar será el <span class="hl-yello2"><strong>error medio absoluto (MAE)</strong></span> (más adecuado para modelos que tengan bajo error de predicción pero con valores extremos e inestables en los errores)</p>
</div>
</section>
<section id="competidores" class="slide level2">
<h2>Competidores</h2>
<p><span class="hl-yellow"><strong>Referencia</strong></span>: por tener una referencia, el error absoluto medio de los promedios de encuestas en España ronda los <span class="hl-yellow"><strong>dos puntos por partido</strong></span></p>

<img data-src="img/mae-theelectoralreport.jpg" class="r-stretch"></section>
<section id="missing-y-outliers" class="slide level2">
<h2>Missing y outliers</h2>
<p>Aunque algunos modelos son robustos frente a outliers y ausentes, con el objetivo de ganar interpretabilidad y armonía entre los modelos construido, se decidido <span class="hl-yellow"><strong>imputar</strong></span> estos datos. Para ello se comparó dos metodologías:</p>
<div class="columns">
<div class="column" style="width:25%;">
<ul>
<li><p>Imputación por <span class="hl-yellow"><strong>estadísticos de localización</strong></span></p></li>
<li><p>Imputación por <span class="hl-yellow"><strong>bagging</strong></span></p></li>
</ul>
</div><div class="column" style="width:75%;">
<p><img data-src="img/distribucion.jpg"></p>
</div>
</div>
<p>El <strong>MAE conseguido en los modelos con variables imputadas por estadísticos es ligeramente peor</strong> que el de los modelos con imputación por Bagging, siendo respectivamente de 1.2 y 0.9.</p>
</section>
<section id="modelos-de-predicción" class="slide level2">
<h2>Modelos de predicción</h2>
<ul>
<li><span class="hl-yellow"><strong>Árboles</strong></span>: usaremos árboles de regresión para predecir nuestro error continuo.
<ul>
<li><strong>Método de división</strong>: usamos F de Snedecor (ANOVA), que toma la división que varie más la media de la variable dependiente.</li>
<li><strong>cp</strong>: parámetro de poda</li>
<li><strong>minbucket</strong>: número de observaciones mínimas en cada nodo final (desde un 1% (70) hasta un 20%).</li>
<li><strong>maxsurrogate</strong>: el árbol no usa todas las variables, va seleccionando las mejores (método de selección <em>embedded</em>).</li>
</ul></li>
</ul>
</section>
<section id="modelos-de-predicción-1" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/mejor-arbol.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-2" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/arbol-comparativa.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-3" class="slide level2">
<h2>Modelos de predicción</h2>
<p>c a fin de superar las limitaciones de los árboles, usaremos modelos con el mismo concepto base y con el método de Ensamblado (combinando múltiples modelos en uno nuevo). En el caso del Baggin se han seleccionado <span class="math inline">\(n&lt;N\)</span> observaciones con reemplazamiento (o sin) de los datos originales y se aplica un árbol.</p>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Random Forest</strong></span>: incorporar la aleatoriedad en las variables utilizadas para segmentar cada nodo del árbol. El proceso es prácticamente igual, pero a diferencia del que se hace en Bagging, cada vez que se abre un nodo seleccionaremos <span class="math inline">\(p\)</span> (<span class="math inline">\(p = 129\)</span>) variables de las <span class="math inline">\(k\)</span> originales y de esas <span class="math inline">\(p\)</span> elegidas se escoge la mejor para llevar a cabo la partición en ese nodo.</li>
</ul>
</section>
<section id="modelos-de-predicción-4" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/rf-mejor.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-5" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/rf-comparativa.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-6" class="slide level2">
<h2>Modelos de predicción</h2>
<ul>
<li><span class="hl-yellow"><strong>Gradient Boosting</strong></span>: formados por un conjunto de árboles de decisión, entrenados de forma secuencial, de forma que cada nuevo árbol trata de mejorar los errores de los árboles anteriores, modificando las predicciones en la dirección de decrecimiento dada por el negativo del gradiente de la función de error (con <em>Early Stopping</em> para evitar el sobreajuste y marcar así un número de iteraciones de parada).
<ul>
<li><strong>Shrinkage (<span class="math inline">\(λ\)</span>) o “learning rate”</strong>: representa el ritmo de aprendizaje y cuanto menor sea, más interaciones se necesitan. En nuestro caso varía desde 0.001 (valor por defecto) hasta 1.</li>
</ul></li>
</ul>
</section>
<section id="modelos-de-predicción-7" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/gbm-mejor.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-8" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/gbm-comparativa.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-9" class="slide level2">
<h2>Modelos de predicción</h2>
<ul>
<li><span class="hl-yellow"><strong>Redes Neuronales</strong></span>: a fin de complementar los inconvenientes de los filtros o rankear variables, aquí se recurrió a <em>wrappers</em> como técnica de selección de variables (métodos de búsqueda secuencial que bucean entre distintas combinaciones de variables)</li>
</ul>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Modelos SVM</strong></span> con kernels lineales y polinomiales de grado 2 y 3.</li>
</ul>
</section>
<section id="modelos-de-predicción-10" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/svm-mejor.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-11" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/svm-comparativa.jpg" class="r-stretch"></section>
<section id="modelos-de-predicción-12" class="slide level2">
<h2>Modelos de predicción</h2>

<img data-src="img/final.jpg" class="r-stretch"></section></section>
<section>
<section id="conclusiones-y-líneas-abiertas" class="title-slide slide level1 center">
<h1>Conclusiones y líneas abiertas</h1>
<p><span style="color:#444442;"><strong>¿Qué hemos conseguido? ¿Qué nos falta?</strong></span></p>
</section>
<section id="conclusiones" class="slide level2">
<h2>Conclusiones</h2>
<ul>
<li>Se ha creado una <span class="hl-yellow"><strong>automatización para la recopilación</strong></span> tanto de encuestas como de datos electorales en nuestro país.</li>
</ul>
<div class="fragment">
<ul>
<li>Se ha comprobado que el hecho de que las casas encuestadoras cometan <span class="hl-yellow"><strong>sesgos sistemáticos</strong></span> puede ser incluso beneficioso en la predicción, alimentando a los modelos con diferentes de variables que les permita capturar algo similar a un «recuerdo de estimación».</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Se ha desarrollado una metodología propia (y aún así preliminar) para predecir la intención de voto, alcanzando en el mejor de los casos un <span class="hl-yellow"><strong>error medio absoluto (MAE) de 0.21</strong></span>, frente a la mejor casa encuestadora (GAD3 con un MAE de 1.9) o al promedio de ellas (2.2 de MAE)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Vimos que los datos de encuestas y promedios son los bloques de variables que más información aportan y los más seleccionados entre nuestros modelos.</li>
</ul>
</div>
</section>
<section id="líneas-abiertas-futuras" class="slide level2">
<h2>Líneas abiertas futuras</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>🟥 <span class="hl-red"><strong>Debilidad</strong></span>: dificultad para la predicción de <span class="hl-red"><strong>partidos nuevos</strong></span> sin información sobre el sesgo de las encuestas</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/logos-partidos.jpeg"></p>
</div>
</div>
<div class="fragment">
<p>✅ <span class="hl-green"><strong>Futura solución</strong></span>: mejorar en la creación de predictoras que permitan a los modelos captar un <span class="hl-green"><strong>«recuerdo de voto»</strong></span>: de partidos nuevos por bloques y regiones, así como crear modelos para <span class="hl-green"><strong>estimar matrices de transferencia de voto</strong></span></p>
</div>
</section>
<section id="líneas-abiertas-futuras-1" class="slide level2">
<h2>Líneas abiertas futuras</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>🟥 <span class="hl-red"><strong>Debilidad</strong></span>: todavía <span class="hl-red"><strong>no incluye variables sociológicas</strong></span>.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/Logotipo_del_CIS.png"></p>
</div>
</div>
<div class="fragment">
<p>✅ <span class="hl-green"><strong>Futura solución</strong></span>: incorporar a los modelos variables sociológicas extraídas de los <span class="hl-green"><strong>microdatos del CIS</strong></span> (como preocupaciones de los españoles)</p>
</div>
</section>
<section id="líneas-abiertas-futuras-2" class="slide level2">
<h2>Líneas abiertas futuras</h2>
<p>🟥 <span class="hl-red"><strong>Debilidad</strong></span>: solo considera <span class="hl-red"><strong>datos agregados</strong></span> de encuestas.</p>
<div class="fragment">
<p>✅ <span class="hl-green"><strong>Futura solución</strong></span>: automatizar la recopilación de <span class="hl-green"><strong>encuestas a nivel autonómico</strong></span> para posteriormente agregarlas en un modelo nacional</p>
</div>
</section>
<section id="líneas-abiertas-futuras-3" class="slide level2">
<h2>Líneas abiertas futuras</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>🟥 <span class="hl-red"><strong>Debilidad</strong></span>: ganar en voto no implicar <span class="hl-red"><strong>ganar en poder</strong></span></p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/escan%CC%83os.jpeg"></p>
</div>
</div>
<div class="fragment">
<p>✅ <span class="hl-green"><strong>Futura solución</strong></span>: desarrollar modelos de <span class="hl-green"><strong>simulación de asignación de escaños</strong></span> (en función de cada sistema electoral) en función de los datos desagregados por comunidades.</p>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Otras ideas</strong></span>: extenderlo a otros sistemas electorales, incluir dependencia entre regiones, etc. Todo ello está siendo estudiado para su posterior implementación en un <span class="hl-yellow"><strong>paquete de R</strong></span>, en colaboración con la sección de datos de RTVE.</p>
</div>
</section></section>
<section id="gracias" class="title-slide slide level1 center">
<h1>¡Gracias!</h1>
<p>&nbsp;</p>
<p>✉️ <span class="hl-yellow"><strong>Mail</strong></span>: <a href="mailto:javalv09@ucm.es" class="email">javalv09@ucm.es</a> (Facultad de Estadística de la UCM)</p>
<p>&nbsp;</p>
<p><span class="hl-purple"><strong>Agradecimientos</strong></span>: «Dinámica compleja e inferencia no parámetrica», proyecto subvencionado por la Agencia Estatal de Investigación (AEI) del Ministerio de Ciencia e Innovación (PID2020-116587GB-I00)</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="text-align: right; font-size:17px;">
Diapositivas creadas integramente con <strong>Quarto</strong> en RStudio
</p>
<div class="footer footer-default">
<p><a href="..."><strong>Javier Álvarez Liébana</strong></a> • SEIO 2023 (Elche) • Fac. Estadística (UCM)</p>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'chalkboard': {"buttons":true},
'multiplex': {"secret":null,"id":"4946f64dbf56fa1d","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>