---
title: "Predicci√≥n del voto electoral en Espa√±a"
title-slide-attributes:
  data-background-image: img/data-science-2.jpeg
  data-background-size: cover
  data-background-opacity: "0.2"
author: "Javier √Ålvarez Li√©bana y Enric Palau Payeras (UCM) ‚Ä¢ SEIO 2023 (Elche)"
affiliation: Facultad de Estudios Estad√≠sticos (UCM)
lang: es
language: custom_lang.yml
format: 
  revealjs:
    theme: [default, style.scss]
    chalkboard: true
    multiplex: true
    menu:
      side: left
      width: normal
    footer: "[<strong>Javier √Ålvarez Li√©bana</strong>](...) ‚Ä¢ SEIO 2023 (Elche) ‚Ä¢ Fac. Estad√≠stica (UCM)"
    slide-number: c/t
execute:
  echo: true
---

# Contexto, objetivos y antecedentes

[**Incertidumbre electoral**]{style="color:#444442;"}

---

## Contexto

-   El clima pol√≠tico espa√±ol lleva experimentando grandes cambios sistem√°ticos desde 2008, pasando de un [**sistema pr√°cticamente bipartidista**]{.hl-yellow} a un sistema donde prima la [**estrategia de pactos**]{.hl-yellow} multipartidista.

. . .

::: columns
::: {.column width="70%"}
-   En √©pocas de crisis, como la pandemia de COVID-19 o las repeticiones electorales de 2019, la [**expectaci√≥n por los resultados electorales**]{.hl-yellow} es m√°xima.
:::

::: {.column width="30%"}
![](img/quien-ganara.jpg)
:::
:::

. . .

-   Sin embargo, a pesar de contar con cada vez [**m√°s casas demosc√≥picas**]{.hl-yellow} y agregadores (¬´food chain feeding demand¬ª), se ha extendido la idea de que las [**encuestas electorales no funcionan**]{.hl-yellow} y que no sirven para predecir el voto.

---

## Objetivos

::: callout-tip
## Objetivo 1: estudiar errores sistem√°ticos

Automatizar un [**proceso de extracci√≥n, transformaci√≥n y carga del hist√≥rico de datos electorales**]{.hl-yellow} as√≠ como de las proyecci√≥n demosc√≥picas de las casas encuestadoras en Espa√±a a nivel nacional.

:::

. . .

::: callout-tip
## Objetivo 2: analizar sesgos sistem√°ticos (house effects)

Analizar la [**desviaci√≥n sistem√°tica de las casas encuestadoras**]{.hl-yellow}, [^1] desagregado por casa encuestadora, partido, bloque ideol√≥gico y cita electoral, entre otras variables.

:::

. . .

::: callout-tip
## Objetivo 3: predecir con Machine Learning

Se aplicar√°n distintos [**algoritmos predictivos de Machine Learning**]{.hl-yellow} para mejorar tanto las predicciones de las casas encuestadoras como los promedios de agregadores electorales (Kiko Llaneras [^2], TheElectoralReport [^3], etc)

:::

[^1]: Masters, A.B.(2020). Estimating House Effects. <https://medium.com/swlh/estimating-houseeffects-5c465f2aca87>

[^2]: <https://elpais.com/autor/francisco-llaneras-estrada/>

[^3]: <https://app.precisaresearch.com/>


---

## Antecedentes

* Pocos son los/as autores/as que han aplicado [**t√©cnicas de Machine Learning**]{.hl-yellow} [^1] para la predicci√≥n de resultados electorales.



[^1]: Hare, C., and Kutsuris, M. (2022). Measuring Swing Voters with a Supervised Machine Learning Ensemble. Political Analysis 31.

[^2]: Silver, N. (2012). Calculating ‚ÄòHouse Effects‚Äô of Polling Firms. <https://fivethirtyeight.com/features/calculatinghouse-effects-of-polling-firms>

[^3]: Silver, N. (2020). How FiveThirtyEight‚Äôs 2020 Presidential Forecast Works ‚Äî And What‚Äôs Different Because Of COVID-19. <https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/>

[^4]: Ortega, A.L. (2022). ¬øC√≥mo funciona el mercado de predicci√≥n? <https://aloport.github.io/predi/projects.html>

---


## Antecedentes


* En la mayor√≠a de casos dichas predicciones son hechas por medios de comunicaci√≥n, institutos demosc√≥picos, partidos electorales o [**agregadores**]{.hl-yellow} (TheElectoralReport o FiveThirtyEight [^2] [^3]). 


[^1]: Hare, C., and Kutsuris, M. (2022). Measuring Swing Voters with a Supervised Machine Learning Ensemble. Political Analysis 31.

[^2]: Silver, N. (2012). Calculating ‚ÄòHouse Effects‚Äô of Polling Firms. <https://fivethirtyeight.com/features/calculatinghouse-effects-of-polling-firms>

[^3]: Silver, N. (2020). How FiveThirtyEight‚Äôs 2020 Presidential Forecast Works ‚Äî And What‚Äôs Different Because Of COVID-19. <https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/>

[^4]: Ortega, A.L. (2022). ¬øC√≥mo funciona el mercado de predicci√≥n? <https://aloport.github.io/predi/projects.html>

---


## Antecedentes


* Recientemente ha llegado a Espa√±a los conocidos como [**mercados de predicci√≥n**]{.hl-yellow} [^4]: una especie de mercado de apuestas en los que se predice la intenci√≥n de voto en funci√≥n del consenso de los apostantes.


[^1]: Hare, C., and Kutsuris, M. (2022). Measuring Swing Voters with a Supervised Machine Learning Ensemble. Political Analysis 31.

[^2]: Silver, N. (2012). Calculating ‚ÄòHouse Effects‚Äô of Polling Firms. <https://fivethirtyeight.com/features/calculatinghouse-effects-of-polling-firms>

[^3]: Silver, N. (2020). How FiveThirtyEight‚Äôs 2020 Presidential Forecast Works ‚Äî And What‚Äôs Different Because Of COVID-19. <https://fivethirtyeight.com/features/how-fivethirtyeights-2020presidential-forecast-works-and-whats-different-because-of-covid-19/>

[^4]: Ortega, A.L. (2022). ¬øC√≥mo funciona el mercado de predicci√≥n? <https://aloport.github.io/predi/projects.html>

---

## Antecedentes


* Algunos autores proponen algunas [**alternativas a las encuestas**]{.hl-yellow} para proporcionar a los partidos una estimaci√≥n de su intenci√≥n de voto basado en el [**an√°lisis de reputaci√≥n**]{.hl-yellow}  de sus candidatos [^1], como predictores correlados de dicha intenci√≥n de voto.

[^1]: Guti√©rrez-Rodr√≠guez, P., Villareal, R., Cuesta-Vali√±o, P., Blozis, S. A. (2023). Valuation of candidate brand equity dimensions and voting intention: alternative polling data in the Spanish presidential election. Humanities and Social Sciences Communications 10,

---

## Antecedentes

* Tambi√©n se han usado recientemente el m√©todo [**Network scale-up (Network scale-up method, NSUM)**]{.hl-yellow}  [^1] [^2] para la estimaci√≥n de intenci√≥n de voto, haciendo uso de [**preguntas indirectas**]{.hl-yellow}  para la estimaci√≥n del tama√±o de una subpoblaci√≥n de votantes [^3]

[^1]: Maltiel, R., Raftery, A.E., McCormick, T.H., Baraff, A.J. (2015). Estimating Population Size Using the Network Scale Up Method. Ann Appl Stat 9

[^2]: Kunke, J.P., Laga, I., Niu, X., McCormick, T.H. (2023). Comparing the Robustness of Simple Network Scale-Up Method (NSUM) Estimators. Center for statistics and the social science.

[^3]: Mart√≠n-Arevalillo, J., Ram√≠rez, J.M., D√≠az-Aranda, S., Aguilar, J., Fern√°ndez-Anta, A., Lillo, R.E. (2023). Study and estimation of voting intention by network scale up methods. SEIO 2023.

# Software empleado y fuentes de datos

---

## Software empleado

* Para la recolecci√≥n y depuraci√≥n de los datos hemos usado tanto R como SQL.

* Para el an√°lisis exploratorio, visualizaci√≥n y modelizaci√≥n hemos usado R

* Todo el c√≥digo se encuentra libremente disponible en Github en  <https://github.com/3nriket/TFM_encuestas_y_elecciones_EPP_UCM_2023>

![](img/Rlogo.png){width=300}
![](img/Sql_data_base_with_logo.png){width=300}

---

## Fuentes de datos

Para explicar la construcci√≥n de la base de datos (etapa 1 de la figura 1) debemos entender primero nuestro entorno de datos. En un primer momento, los datos se pueden clasificar seg√∫n su sea origen: datos de encuestadoras (origen Wikipedia), datos electorales como el censo y porcentaje de voto (origen Ministerio del Interior) y datos ‚Äúfundamentales‚Äù (origen fuentes diversas: p. ej. INE, el CIS, etc.). En resumen, partimos de los conjuntos de la tabla ilustrada a continuaci√≥n:  Tabla 1: Descripci√≥n general de la base de datos por bloques. Nombre de la Tabla Fuente Descripci√≥n ‚Äúnational_surveys‚Äù Wikipedia Datos de encuestas y encuestadoras. ‚Äúvotes_national_by_mun‚Äù ‚Äúvotes_national‚Äù ‚Äúcensus_national_by_year‚Äù Ministerio del Interior Datos de censo y elecciones. ‚ÄúBDfundamental‚Äù CIS, INE, DatosMacro etc. Datos de contexto socioecon√≥mico, pol√≠tica, demograf√≠a etc. 

# Metodolog√≠a: extracci√≥n y depuraci√≥n

## Variable objetivo

---

## Depuraci√≥n: encuestas

4.2.1

---

## Depuraci√≥n: resultados electorales

4.2.2

---

## Depuraci√≥n: variables externas

4.2.3

# Metodolog√≠a: an√°lisis de errores

---

## House effects

---

## Cronol√≥gico

# Metodolog√≠a: t√©cnicas Machine Learning

---

## Train-validaci√≥n-test

---

## Modelos de predicci√≥n

# Resultados

---

## a

# Conclusiones y l√≠neas abiertas

[**¬øQu√© hemos conseguido? ¬øQu√© nos falta?**]{style="color:#444442;"}

---

## Conclusiones

-   Se ha creado una automatizaci√≥n para la recopilaci√≥n tanto de encuestas como de datos electorales en nuestro pa√≠s.

. . .

-   House effect

. . .

-   Se ha desarrollado una metodolog√≠a propia (y a√∫n as√≠ preliminar) para predecir la intenci√≥n de voto, alcanzando en el mejor de los casos un error medio absoluto (MAE) de 0.21, frente a GAD3 con un MAE de 1.9

. . .

-   Vimos que los datos de encuestas y promedios son los bloques de variables que m√°s informaci√≥n aportan y los m√°s seleccionados entre nuestros modelos.

---

## L√≠neas abiertas futuras

::: columns
::: {.column width="60%"}
üü• [**Debilidad**]{.hl-red}: dificultad para la predicci√≥n de [**partidos nuevos**]{.hl-red} sin informaci√≥n sobre el sesgo de las encuestas
:::

::: {.column width="40%"}
![](img/logos-partidos.jpeg)
:::
:::

. . .

‚úÖ [**Futura soluci√≥n**]{.hl-green}: mejorar en la creaci√≥n de predictoras que permitan a los modelos captar un [**¬´recuerdo de voto¬ª**]{.hl-green}: de partidos nuevos por bloques y regiones, as√≠ como crear modelos para [**estimar matrices de transferencia de voto**]{.hl-green}

---

## L√≠neas abiertas futuras

::: columns
::: {.column width="60%"}
üü• [**Debilidad**]{.hl-red}: todav√≠a [**no incluye variables sociol√≥gicas**]{.hl-red}.
:::

::: {.column width="40%"}
![](img/Logotipo_del_CIS.png)
:::
:::

. . .

‚úÖ [**Futura soluci√≥n**]{.hl-green}: incorporar a los modelos variables sociol√≥gicas extra√≠das de los [**microdatos del CIS**]{.hl-green} (como preocupaciones de los espa√±oles)

---

## L√≠neas abiertas futuras

üü• [**Debilidad**]{.hl-red}: solo considera [**datos agregados**]{.hl-red} de encuestas.

. . .

‚úÖ [**Futura soluci√≥n**]{.hl-green}: automatizar la recopilaci√≥n de [**encuestas a nivel auton√≥mico**]{.hl-green} para posteriormente agregarlas en un modelo nacional

---

## L√≠neas abiertas futuras

::: columns
::: {.column width="60%"}
üü• [**Debilidad**]{.hl-red}: ganar en voto no implicar [**ganar en poder**]{.hl-red}
:::

::: {.column width="40%"}
![](img/escan%CC%83os.jpeg)
:::
:::

. . .

‚úÖ [**Futura soluci√≥n**]{.hl-green}: desarrollar modelos de [**simulaci√≥n de asignaci√≥n de esca√±os**]{.hl-green} (en funci√≥n de cada sistema electoral) en funci√≥n de los datos desagregados por comunidades.

. . .

[**Otras ideas**]{.hl-yellow}: extenderlo a otros sistemas electorales, incluir dependencia entre regiones, etc. Todo ello est√° siendo estudiado para su posterior implementaci√≥n en un [**paquete de R**]{.hl-yellow}, en colaboraci√≥n con la secci√≥n de datos de RTVE.

# ¬°Gracias!

¬†

‚úâÔ∏è [**Mail**]{.hl-yellow}: [javalv09\@ucm.es](mailto:javalv09@ucm.es){.email} (Facultad de Estad√≠stica de la UCM)

¬†

[**Agradecimientos**]{.hl-purple}: ¬´Din√°mica compleja e inferencia no par√°metrica¬ª, proyecto subvencionado por la Agencia Estatal de Investigaci√≥n (AEI) del Ministerio de Ciencia e Innovaci√≥n (PID2020-116587GB-I00)

¬†

¬†

¬†

<p style="text-align: right; font-size:17px;">

Diapositivas creadas integramente con Quarto en RStudio

</p>
